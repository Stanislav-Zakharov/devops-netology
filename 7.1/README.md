## Домашнее задание к занятию "7.1. Инфраструктура как код"
1. Выбор инструментов.  
    1. Какой тип инфраструктуры будем использовать для этого проекта: изменяемый или не изменяемый?
        > Выбираем неизменяемый тип инфраструктуры, так как именно этот подход позволит нам добиться максимальной идемпотентности. Учитывая что во вводных требованиях мы имеем `большое количество небольших релизов, тестирований интеграций, откатов, доработок`, нам придется регулярно тиражировать инфраструктуру для создания dev, stage, preprod сред. Следовательно изменяемый подход к созданию инфраструктуры не даст нам необходимой линейности и прозачности. Тут, на мой взгляд, мы должны исходить из принципа - описали инфраструктуру, настроили CI/CD, формализовали требования для разработчиков и в процессе разработки, при фиксациях изменений в коде продукта, компоненты автоматически развертываются на соответствующих средах, для всех участников процесса (разработиков, тестировщиков, бизнес-пользователей и т.д)
    2. Будет ли центральный сервер для управления инфраструктурой?
        > Предполагается только система контроля версий для хранения сценариев и описателей инфраструктуры, так мы сможем контролировать все изменения в конфигурации нашей инфраструктуры и ретроспективно откатываться в случае неудачных изменений.
    3. Будут ли агенты на серверах?
        > Нет, агентов для управления инфраструктуры у нас не будет, так как текущие версии инструментов для управления инфраструктурой не требуют этого.
    4. Будут ли использованы средства для управления конфигурацией или инициализации ресурсов?
        > В случае, если в нашем распоряжении имеется облачный ресурс или инфраструктура, которая поддерживает конфигурацию через существующий Terraform provider, то будем использовать Terraform.

    * Какие инструменты из уже используемых вы хотели бы использовать для нового проекта?
        > - `Packer` - для автоматизации сборки образов ОС  
        > - `Terraform` - для управления конфигурацией или инициализации ресурсов
        > - `Docker` - для контейнеризации наших приложений
        > - `Kubernetes` - для оркестрации контейнеров
        > - От `Teamcity` я бы наверное отказался в пользу Gitlab CI, ввиду большей распространенности (тут если честно, как у разработчика уже есть опыт работы с Gitlab :))
        > - `Ansible` - для автоматизации сценариев развертывания в декларативном стиле
        > - От `Bash скриптов`, которые используются в качестве сценариев, надо отказаться, так как мы строим декларативную и максимально идемпотентную конфигурацию инфраструктуры
    * Хотите ли рассмотреть возможность внедрения новых инструментов для этого проекта?
        > Для разертывания инфраструктуры и организации процессов CI/CD, этих инструментов на мой взгляд на старте будет достаточно.

2. Установка терраформ
    ```bash
    $ wget -O- https://apt.releases.hashicorp.com/gpg | gpg --dearmor | sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg
    echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list
    sudo apt update && sudo apt install terraform

    Get:1 https://apt.releases.hashicorp.com jammy/main amd64 terraform amd64 1.3.6 [19,5 MB]
    Fetched 19,5 MB in 3s (7 353 kB/s)      
    Selecting previously unselected package terraform.
    (Reading database ... 264879 files and directories currently installed.)
    Preparing to unpack .../terraform_1.3.6_amd64.deb ...
    Unpacking terraform (1.3.6) ...
    Setting up terraform (1.3.6) ...

    $ terraform --version
    Terraform v1.3.6
    on linux_amd64
    ```
3. Поддержка легаси кода.
    ```bash
    $ wget -qO- https://releases.hashicorp.com/terraform/0.12.0/terraform_0.12.0_linux_amd64.zip | zcat >> /tmp/terraform012 \
    && sudo mv /tmp/terraform012 /usr/local/bin \
    && sudo chmod u+x /usr/local/bin/terraform012

    $ terraform012 --version
    Terraform v0.12.0

    Your version of Terraform is out of date! The latest version
    is 1.3.6. You can update by downloading from www.terraform.io/downloads.html

    $ terraform --version
    Terraform v1.3.6
    on linux_amd64
    ```